# ===========================
# Application Environment
# ===========================
NODE_ENV=development
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=info

# ===========================
# Database Configuration
# ===========================
# PostgreSQL (Primary Database)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=trading_platform
POSTGRES_USER=trading_user
POSTGRES_PASSWORD=your_secure_password_here

# PostgreSQL Connection Pool
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_MIN_CONNECTIONS=5
POSTGRES_IDLE_TIMEOUT=30000
POSTGRES_CONNECTION_TIMEOUT=60000

# Database URLs
DATABASE_URL=postgresql://trading_user:your_secure_password_here@localhost:5432/trading_platform
DATABASE_POOL_SIZE=10

# Test Database
TEST_DATABASE_URL=postgresql://trading_user:your_secure_password_here@localhost:5432/trading_platform_test

# Migration Configuration
MIGRATION_TIMEOUT=120000
MIGRATION_BATCH_SIZE=1000
MIGRATION_DRY_RUN=false
MIGRATION_AUTO_BACKUP=true
MIGRATION_BACKUP_PATH=/tmp/db_backups

# ===========================
# Redis Configuration
# ===========================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379/0

# Redis for different purposes
REDIS_CACHE_DB=1
REDIS_SESSION_DB=2
REDIS_QUEUE_DB=3

# ===========================
# Binance API Configuration
# ===========================
# Spot Trading
BINANCE_SPOT_API_KEY=your_binance_spot_api_key_here
BINANCE_SPOT_SECRET_KEY=your_binance_spot_secret_key_here
BINANCE_SPOT_BASE_URL=https://testnet.binance.vision
BINANCE_SPOT_WS_URL=wss://testnet.binance.vision/ws

# Futures Trading
BINANCE_FUTURES_API_KEY=your_binance_futures_api_key_here
BINANCE_FUTURES_SECRET_KEY=your_binance_futures_secret_key_here
BINANCE_FUTURES_BASE_URL=https://testnet.binancefuture.com
BINANCE_FUTURES_WS_URL=wss://testnet-dstream.binancefuture.com/stream

# Trading Mode (spot, futures, both)
TRADING_MODE=both
BINANCE_TESTNET=true

# Binance Rate Limiting
BINANCE_RATE_LIMIT_REQUESTS_PER_MINUTE=1200
BINANCE_RATE_LIMIT_ORDERS_PER_SECOND=10
BINANCE_RATE_LIMIT_ORDERS_PER_DAY=200000

# ===========================
# WebSocket Configuration
# ===========================
WS_PORT=8080
WS_MAX_CONNECTIONS=1000
WS_HEARTBEAT_INTERVAL=30000
WS_PING_TIMEOUT=60000

# ===========================
# Authentication & Security
# ===========================
JWT_SECRET=your_jwt_secret_key_minimum_32_characters
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Session configuration
SESSION_SECRET=your_session_secret_key_minimum_32_characters
SESSION_MAX_AGE=86400000

# Encryption
ENCRYPTION_KEY=your_encryption_key_32_characters
BCRYPT_ROUNDS=12

# CORS settings
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# ===========================
# Email Configuration
# ===========================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_specific_password

# Email settings
FROM_EMAIL=noreply@tradingplatform.com
SUPPORT_EMAIL=support@tradingplatform.com

# ===========================
# File Storage
# ===========================
# Local storage
UPLOAD_DIR=uploads
MAX_FILE_SIZE=10485760

# AWS S3 (if using cloud storage)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=trading-platform-files

# ===========================
# Application Ports
# ===========================
# Python Engine
ENGINE_PORT=8000
ENGINE_HOST=0.0.0.0

# Go Router
ROUTER_PORT=8001
ROUTER_HOST=0.0.0.0

# NestJS BFF
BFF_PORT=8002
BFF_HOST=0.0.0.0

# Next.js UI
UI_PORT=3000
UI_HOST=0.0.0.0

# ===========================
# Microservices URLs
# ===========================
ENGINE_URL=http://localhost:8000
ROUTER_URL=http://localhost:8001
BFF_URL=http://localhost:8002
UI_URL=http://localhost:3000

# ===========================
# Trading Engine Configuration
# ===========================
# Risk management
MAX_POSITION_SIZE=10000
MAX_DAILY_LOSS=1000
MAX_LEVERAGE=10
DEFAULT_STOP_LOSS_PERCENTAGE=2.0
DEFAULT_TAKE_PROFIT_PERCENTAGE=5.0

# Order configuration
ORDER_TIMEOUT=30000
MAX_ORDERS_PER_USER=100
MIN_ORDER_VALUE=10

# Price feed configuration
PRICE_FEED_INTERVAL=1000
CANDLESTICK_INTERVALS=1m,5m,15m,1h,4h,1d

# ===========================
# Monitoring & Observability
# ===========================
# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# Grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin_password_here

# Health check
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5
HEALTH_FAILURE_THRESHOLD=3
HEALTH_RECOVERY_THRESHOLD=2
HEALTH_INCLUDE_DETAILS=true

# ===========================
# Logging Configuration
# ===========================
LOG_FORMAT=json
LOG_TIMESTAMP=true
LOG_COLORIZE=false
LOG_FILE_PATH=logs/app.log
LOG_MAX_FILE_SIZE=100MB
LOG_MAX_FILES=10

# ===========================
# Cache Configuration
# ===========================
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
PRICE_CACHE_TTL=5
USER_CACHE_TTL=300
MARKET_DATA_CACHE_TTL=1

# ===========================
# Rate Limiting
# ===========================
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_FAILED_REQUESTS=true

# API Rate limiting
API_RATE_LIMIT_PER_IP=1000
API_RATE_LIMIT_WINDOW=3600000

# ===========================
# Backup Configuration
# ===========================
BACKUP_ENABLED=true
BACKUP_INTERVAL=3600000
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=trading-platform-backups

# ===========================
# Feature Flags
# ===========================
ENABLE_PAPER_TRADING=true
ENABLE_REAL_TRADING=false
ENABLE_SOCIAL_TRADING=false
ENABLE_ADVANCED_ORDERS=true
ENABLE_NOTIFICATIONS=true

# ===========================
# Notification Configuration
# ===========================
# Slack (for system alerts)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Discord (for community)
DISCORD_BOT_TOKEN=your_discord_bot_token
DISCORD_GUILD_ID=your_discord_guild_id

# Push notifications
VAPID_PUBLIC_KEY=your_vapid_public_key
VAPID_PRIVATE_KEY=your_vapid_private_key
VAPID_SUBJECT=mailto:admin@tradingplatform.com

# ===========================
# Development Tools
# ===========================
# Hot reload
HOT_RELOAD=true
WATCH_FILES=true

# Testing
TEST_REDIS_URL=redis://localhost:6379/15

# Mock services
USE_MOCK_BINANCE=true
USE_MOCK_EMAIL=true

# ===========================
# Production Settings
# ===========================
# SSL/TLS
SSL_ENABLED=false
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/key.pem

# Security headers
HELMET_ENABLED=true
FORCE_HTTPS=false

# Performance
CLUSTER_MODE=false
WORKER_PROCESSES=auto
MAX_REQUEST_SIZE=50mb

# ===========================
# Third-party Integrations
# ===========================
# Analytics
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX
MIXPANEL_TOKEN=your_mixpanel_token

# Error tracking
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id

# Payment processing
STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Social auth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# ===========================
# Timeouts and Intervals
# ===========================
REQUEST_TIMEOUT=30000
CONNECTION_TIMEOUT=10000
SOCKET_TIMEOUT=60000
KEEP_ALIVE_TIMEOUT=5000

# Background jobs
JOB_CONCURRENCY=10
JOB_MAX_ATTEMPTS=3
JOB_BACKOFF_DELAY=5000

# ===========================
# Contract Validation
# ===========================
CONTRACT_SCHEMA_VERSION=1.0.0
CONTRACT_SCHEMA_PATH=contracts/jsonschema
CONTRACT_VALIDATION_ENABLED=true
CONTRACT_VALIDATION_MODE=strict
CONTRACT_MAX_PAYLOAD_SIZE=1048576
CONTRACT_VALIDATION_TIMEOUT=5000
CONTRACT_BREAKING_CHANGE_PROTECTION=true
CONTRACT_DEBUG_INVALID_EVENTS=false
CONTRACT_METRICS_ENABLED=false
CONTRACT_EVENT_STORE_PATH=contracts/events
SCHEMA_EVOLUTION_MODE=backward_compatible